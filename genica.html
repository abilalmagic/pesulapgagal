<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PROF JAY MNEMONICA TEST</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: #121212;
            color: #eee;
            display: flex;
            justify-content: center;
            padding: 10px;
        }

        .container {
            width: 100%;
            max-width: 360px;
            background: #1e1e1e;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        h2 { font-size: 14px; text-align: center; color: #ffeb3b; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px; }

        /* Navigasi */
        .menu-nav { display: flex; gap: 5px; margin-bottom: 20px; }
        .nav-btn {
            flex: 1;
            padding: 10px 5px;
            font-size: 10px;
            font-weight: 800;
            background: #2d2d2d;
            border: 1px solid #3d3d3d;
            color: #888;
            border-radius: 6px;
            cursor: pointer;
            text-transform: uppercase;
        }
        .nav-btn.active { background: #ffeb3b; color: #000; border-color: #ffeb3b; }

        .page { display: none; }
        .page.active { display: block; }

        /* ACAAN Styles */
        label { font-size: 10px; font-weight: 600; color: #888; text-transform: uppercase; margin-bottom: 4px; display: block; }
        select { width: 100%; padding: 12px; font-size: 16px; border-radius: 8px; border: 1px solid #333; background: #252525; color: #fff; margin-bottom: 12px; outline: none; }
        
        /* Grid ACAAN dengan tombol tambahan di akhir */
        .number-grid { 
            display: grid; 
            grid-template-columns: repeat(8, 1fr); 
            gap: 4px; 
            margin-bottom: 12px; 
        }
        .num-btn { aspect-ratio: 1/1; font-size: 12px; background: #2d2d2d; border: 1px solid #3d3d3d; border-radius: 4px; color: #fff; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .num-btn.active { background: #ffeb3b; color: #000; font-weight: bold; }

        /* Tombol Reset & Send di dalam Grid */
        .grid-action-btn {
            grid-column: span 2; /* Mengambil sisa ruang 2 kolom */
            height: 100%;
            border-radius: 4px;
            border: none;
            font-size: 9px;
            font-weight: 800;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
        }
        .reset-btn { background: #444; color: #eee; }
        .send-btn { background: #ffeb3b; color: #000; }
        .send-btn svg { margin-left: 2px; }

        .result-box { background: #252525; padding: 10px; border-radius: 8px; text-align: center; border: 1px solid #ffeb3b33; }
        .result-box h3 { font-size: 9px; color: #888; margin-bottom: 2px; }
        #result { font-size: 32px; font-weight: 800; color: #ffeb3b; min-height: 40px; }

        /* Mnemonica List */
        .mnemonic-list { height: 350px; overflow-y: auto; background: #181818; border-radius: 8px; padding: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
        .list-item { font-size: 11px; padding: 6px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; }
        .list-item span { color: #ffeb3b; font-weight: bold; }

        /* Memorize Test */
        .quiz-card { background: #252525; padding: 25px; border-radius: 12px; text-align: center; margin-bottom: 15px; border: 2px solid #333; }
        #quiz-question { font-size: 50px; font-weight: 800; margin-bottom: 5px; }
        .quiz-controls { display: flex; flex-direction: column; gap: 10px; }
        .quiz-input { width: 100%; padding: 15px; border-radius: 8px; border: none; background: #fff; color: #000; font-size: 20px; text-align: center; font-weight: bold; }
        .btn-group { display: flex; gap: 8px; }
        .check-btn { flex: 2; padding: 12px; background: #ffeb3b; border: none; border-radius: 8px; font-weight: 800; cursor: pointer; color: #000; }
        .next-btn { flex: 1; padding: 12px; background: #444; border: none; border-radius: 8px; font-weight: 800; cursor: pointer; color: #fff; }
        #quiz-feedback { margin-top: 10px; text-align: center; font-size: 13px; font-weight: bold; min-height: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h2>PROF JAY MNEMONICA TEST</h2>

    <div class="menu-nav">
        <button class="nav-btn active" onclick="showPage('acaan', this)">ACAAN</button>
        <button class="nav-btn" onclick="showPage('mnemonica', this)">Mnemonica</button>
        <button class="nav-btn" onclick="showPage('memorize', this)">Memorize</button>
    </div>

    <div id="acaan" class="page active">
        <label>1. Pilih Kartu</label>
        <select id="card-select" onchange="generateAcaan()">
            <option value="" disabled selected>-- PILIH KARTU --</option>
            <optgroup label="♣ KRITING" id="opt-kriting"></optgroup>
            <optgroup label="♥ HATI" id="opt-hati" style="color:#ff5252;"></optgroup>
            <optgroup label="♠ SEKOP" id="opt-sekop"></optgroup>
            <optgroup label="♦ DIAMOND" id="opt-diamond" style="color:#ff5252;"></optgroup>
        </select>
        
        <label>2. Posisi Tujuan</label>
        <div class="number-grid" id="acaanGrid">
            </div>

        <div class="result-box">
            <h3>HASIL CUT KE:</h3>
            <p id="result">-</p>
        </div>
    </div>

    <div id="mnemonica" class="page">
        <div class="mnemonic-list" id="fullList"></div>
    </div>

    <div id="memorize" class="page">
        <div class="quiz-card">
            <div id="quiz-question">?</div>
            <p style="font-size: 10px; color: #888; letter-spacing: 1px;">TEBAK POSISI (1-52)</p>
        </div>
        <div class="quiz-controls">
            <input type="number" id="quiz-answer" class="quiz-input" placeholder="00" inputmode="numeric">
            <div class="btn-group">
                <button class="check-btn" onclick="checkQuiz()">CEK HASIL</button>
                <button class="next-btn" onclick="newQuiz()">NEXT</button>
            </div>
        </div>
        <p id="quiz-feedback"></p>
    </div>
</div>

<script>
    const stack = [
        "4♣", "2♥", "7♦", "3♣", "4♥", "6♦", "As♠", "5♥", "9♠", "2♠",
        "Q♥", "3♦", "Q♣", "8♥", "6♠", "5♠", "9♥", "K♣", "2♦",
        "J♥", "3♠", "8♠", "6♥", "10♣", "5♦", "K♦", "2♣", "3♥",
        "8♦", "5♣", "K♠", "J♦", "8♣", "10♠", "K♥", "J♣",
        "7♠", "10♥", "As♦", "4♠", "7♥", "4♦", "As♣", "9♣", "J♠",
        "Q♦", "7♣", "Q♠", "10♦", "6♣", "As♥", "9♦"
    ];

    const cardData = [
        {val: 43, txt: "As♣", group: "kriting"}, {val: 27, txt: "2♣", group: "kriting"}, {val: 4, txt: "3♣", group: "kriting"}, {val: 1, txt: "4♣", group: "kriting"}, {val: 30, txt: "5♣", group: "kriting"}, {val: 50, txt: "6♣", group: "kriting"}, {val: 47, txt: "7♣", group: "kriting"}, {val: 33, txt: "8♣", group: "kriting"}, {val: 44, txt: "9♣", group: "kriting"}, {val: 24, txt: "10♣", group: "kriting"}, {val: 36, txt: "J♣", group: "kriting"}, {val: 13, txt: "Q♣", group: "kriting"}, {val: 18, txt: "K♣", group: "kriting"},
        {val: 51, txt: "As♥", group: "hati"}, {val: 2, txt: "2♥", group: "hati"}, {val: 28, txt: "3♥", group: "hati"}, {val: 5, txt: "4♥", group: "hati"}, {val: 8, txt: "5♥", group: "hati"}, {val: 23, txt: "6♥", group: "hati"}, {val: 41, txt: "7♥", group: "hati"}, {val: 14, txt: "8♥", group: "hati"}, {val: 17, txt: "9♥", group: "hati"}, {val: 38, txt: "10♥", group: "hati"}, {val: 20, txt: "J♥", group: "hati"}, {val: 11, txt: "Q♥", group: "hati"}, {val: 35, txt: "K♥", group: "hati"},
        {val: 7, txt: "As♠", group: "sekop"}, {val: 10, txt: "2♠", group: "sekop"}, {val: 21, txt: "3♠", group: "sekop"}, {val: 40, txt: "4♠", group: "sekop"}, {val: 16, txt: "5♠", group: "sekop"}, {val: 15, txt: "6♠", group: "sekop"}, {val: 37, txt: "7♠", group: "sekop"}, {val: 22, txt: "8♠", group: "sekop"}, {val: 9, txt: "9♠", group: "sekop"}, {val: 34, txt: "10♠", group: "sekop"}, {val: 45, txt: "J♠", group: "sekop"}, {val: 48, txt: "Q♠", group: "sekop"}, {val: 31, txt: "K♠", group: "sekop"},
        {val: 39, txt: "As♦", group: "diamond"}, {val: 19, txt: "2♦", group: "diamond"}, {val: 12, txt: "3♦", group: "diamond"}, {val: 42, txt: "4♦", group: "diamond"}, {val: 25, txt: "5♦", group: "diamond"}, {val: 6, txt: "6♦", group: "diamond"}, {val: 3, txt: "7♦", group: "diamond"}, {val: 29, txt: "8♦", group: "diamond"}, {val: 52, txt: "9♦", group: "diamond"}, {val: 49, txt: "10♦", group: "diamond"}, {val: 32, txt: "J♦", group: "diamond"}, {val: 46, txt: "Q♦", group: "diamond"}, {val: 26, txt: "K♦", group: "diamond"}
    ];

    let selectedAcaanTarget = null;
    let currentQuizCard = "";

    function init() {
        // Init Dropdown
        cardData.forEach(c => {
            const opt = new Option(c.txt, c.val);
            document.getElementById(`opt-${c.group}`).appendChild(opt);
        });

        // Init ACAAN Grid (1-52)
        const grid = document.getElementById('acaanGrid');
        for (let i = 1; i <= 52; i++) {
            let btn = document.createElement('div');
            btn.innerText = i; btn.className = 'num-btn';
            btn.onclick = function() {
                document.querySelectorAll('#acaanGrid .num-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedAcaanTarget = i;
                generateAcaan();
            };
            grid.appendChild(btn);
        }

        // Tambah Tombol RESET ke Grid (mengisi kolom ke-5 & 6 di baris terakhir)
        let resetBtn = document.createElement('button');
        resetBtn.innerText = "RESET";
        resetBtn.className = "grid-action-btn reset-btn";
        resetBtn.onclick = resetAcaan;
        grid.appendChild(resetBtn);

        // Tambah Tombol SEND ke Grid (mengisi kolom ke-7 & 8 di baris terakhir)
        let sendBtn = document.createElement('button');
        sendBtn.innerHTML = 'SEND <svg viewBox="0 0 24 24" width="10" height="10" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>';
        sendBtn.className = "grid-action-btn send-btn";
        sendBtn.onclick = sendToNtfy;
        grid.appendChild(sendBtn);

        // Init Mnemonica List
        const listDiv = document.getElementById('fullList');
        stack.forEach((card, index) => {
            listDiv.innerHTML += `<div class="list-item">${index + 1}. <span>${card}</span></div>`;
        });

        newQuiz();
    }

    function showPage(pageId, btn) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        btn.classList.add('active');
    }

    function generateAcaan() {
        const cardVal = document.getElementById("card-select").value;
        if (!selectedAcaanTarget || !cardVal) return;
        const curPos = parseInt(cardVal) - 1;
        const tarPos = selectedAcaanTarget;
        let resIdx = (tarPos - curPos) > 0 ? (52 - (tarPos - curPos)) % 52 : ( (curPos+2) - (tarPos+2) + 52) % 52;
        
        const resEl = document.getElementById("result");
        resEl.innerText = stack[resIdx];
        
        // Warna merah jika kartu Hati/Diamond
        if (stack[resIdx].includes('♥') || stack[resIdx].includes('♦')) {
            resEl.style.color = "#ff5252";
        } else {
            resEl.style.color = "#ffeb3b";
        }
    }

    function resetAcaan() {
        document.getElementById("card-select").selectedIndex = 0;
        document.querySelectorAll('#acaanGrid .num-btn').forEach(b => b.classList.remove('active'));
        selectedAcaanTarget = null;
        document.getElementById("result").innerText = "-";
        document.getElementById("result").style.color = "#ffeb3b";
    }

    function sendToNtfy() {
        const resultText = document.getElementById("result").innerText;
        if (resultText === "-" || resultText === "") return;

        fetch('https://ntfy.sh/aijayz', {
            method: 'POST',
            body: `Hasil Cut: ${resultText}`,
            headers: { 'Title': 'Prof Jay Mnemonica' }
        })
        .then(() => {
            const sBtn = document.querySelector('.send-btn');
            const originalColor = sBtn.style.backgroundColor;
            sBtn.style.backgroundColor = "#4caf50";
            setTimeout(() => sBtn.style.backgroundColor = originalColor, 500);
        })
        .catch(err => console.error('Error ntfy:', err));
    }

    // Quiz Logic
    function newQuiz() {
        const randomIdx = Math.floor(Math.random() * 52);
        currentQuizCard = stack[randomIdx];
        document.getElementById('quiz-question').innerText = currentQuizCard;
        document.getElementById('quiz-answer').value = "";
        document.getElementById('quiz-feedback').innerText = "";
        
        if (currentQuizCard.includes('♥') || currentQuizCard.includes('♦')) {
            document.getElementById('quiz-question').style.color = "#ff5252";
        } else {
            document.getElementById('quiz-question').style.color = "#fff";
        }
    }

    function checkQuiz() {
        const inputEl = document.getElementById('quiz-answer');
        const ans = inputEl.value;
        const correctPos = stack.indexOf(currentQuizCard) + 1;
        const feedback = document.getElementById('quiz-feedback');

        if (parseInt(ans) === correctPos) {
            feedback.style.color = "#4caf50";
            feedback.innerText = "BENAR! Memuat...";
            setTimeout(newQuiz, 800);
        } else {
            feedback.style.color = "#ff5252";
            feedback.innerText = `SALAH! Posisi ke-${correctPos}`;
        }
    }

    init();
</script>
</body>
</html>
